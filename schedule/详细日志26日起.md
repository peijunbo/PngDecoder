# 9月26日

##### 1、决定用roberts算子进行边缘检测。看不懂矩阵什么意思，上网查找后找到一种可能的公式[边缘检测 Roberts算子 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/266361551)

##### 2、反复研究[数字图像处理:边缘检测(Edge detection) - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/59640437)。发现简单的算子都差不多，随便选了一个。写出代码后发现与原图像差距不大，再次查阅文档意识到还有梯度图像、非极大值抑制等等。

##### 3、捋一下思路。横向用sobel滤波后在纵向以sobel滤波。遇到一个问题，以owntest.png测试时发现所有纯白像素都被填上了颜色。花了几十分钟对各个点的数据反复print，发现graylist中已经遍历过的数据都发生了改变，上网搜索后意识到是自己基本功不过关。。。尝试将一个列表的值赋给另一个列表时不能用`list1 = list2`这样两个列表指向的地址会是一个地址，改动一个另一个也就跟着变了。。。

##### 4、修改了之后测试成功，不过因为采用的滤波方法过于简单，输出的效果一般。

##### 5、下载opencv库，然而出现了意料之外的问题。在pycharm中始终显示没有cv2模块，也没有代码补全功能。但是写出程序照样可以正常运行，花了近好几个小时上网找，终于找到了解决方法。。。[spyder下，Python3中import cv2时，显示没有“cv2”模块_学学学玩玩玩的博客-CSDN博客](https://blog.csdn.net/qq_30727951/article/details/107976235)。然而过了一会儿又没有代码补全了。再次上网查找，终于有人提到cv2文件夹的路径要求为全英文。于是移动cv2文件夹，成功显示提示。

##### 6、正式开始使用opencv

##### 7、报错，说CRC值错误，说明还是要计算CRC值，上网了解到zlib库就有计算crc32的函数。

##### 8、编写程序，处理图片生成视频。距离成功差最后一步

# 9月27日

##### 1、将处理并产生视频用函数实现，了解os库的`remove()`方法来删除处理过程中产生的图片。完成task8

##### 2、尝试直接将图像格式转为灰度图从而避免对rgb三个列表的处理以提升运行速度。

##### 3、遇到了意料之外的事情，在读取灰度图时发现idat中的第一个像素点的灰度值与打开PS查看的灰度值不同，然而滤波器方法却完全符合。于是我在PS中尝试将第一个像素点的灰度值进行从0至255的遍历，试图找到问题所在。然而发现一件神奇的事情。在PS中，灰度值并不能取到从0至255所有数，如不能取到3、5、7、8...再仔细研究，发现每次PS的灰度值发生跳跃时，程序读取到的灰度值才会加1，猜测问题就出在这里，导致程序读取到的灰度值一般低于PS显示的灰度值。

##### 4、不过至少知道了灰度图中idat的格式，编写程序尝试自己创建灰度图。

# 9月28日

##### 1、写出相应的程序，实现向灰度图的转换。

##### 2、测试后发现PS读取到的第一个像素点灰度值依旧与程序写入的不同。不清楚是PS的原因还是灰度值本身有着某种特殊的对应方法。不过程序确实能正常运行。

##### 3、上网了解到QQ截图也可以查看RGB。于是用QQ截图功能查看灰度图的RGB。首先用windows照片查看器打开再用QQ识别RGB，发现与程序读取到的相同，此时用PS打开同一张灰度图，发现PS显示的灰度值要大。猜测是PS为了使灰度图更好看而强行更改了灰度值的显示。

##### 4、从PS测试.png中可以明显看到PS确实对灰度图进行了处理。

##### 5、测试灰度转换后的效率

| 处理对象 | 处理方式     | 原方法     | 转为灰度图         |
| -------- | ------------ | ---------- | ------------------ |
| test1    | changeedge() | 5.027187   | 3.6544759          |
| test1    | changeedge() | 5.0428013  | 3.6404322000000002 |
| test1    | changegray() | 2.6705469  | 2.2804187999999996 |
| test1    | changegray() | 2.6653742  | 2.2763293          |
| test2    | changegray() | 23.4268171 | 21.0424114         |
| test2    | changegray() | 23.3476318 | 21.6529538         |
| test2    | changeedge() | 38.0338662 | 29.303929099999998 |
| test2    | changeedge() | 38.5094934 | 29.709483199999998 |

​	实践证明更换方法后确实是快了尤其加快了在对灰度图做其他处理的速度。而且经过查看，用原方法产生的test2边缘图大小为8mb多，而直接转化为灰度图的方法大小6mb多。而产生的灰度图大小接近。总体来说新方法确实好。

